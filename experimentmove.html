$(document).ready(function(){

    class Defender {
        constructor(src, alt, x, container, gamecontainer){
            this.src = src;
            this.alt = alt;
            this.container = container;
            this.gameContainer = gamecontainer;
            this.x = x;
            this.imageElement = $('<img>', {
                src: this.src,
                alt: this.alt,
            });

            this.imageElement.css('position', 'absolute', );
            this.imageElement.css('left', this.x + 'px');
    

        } 

        appendImage(){
            $(this.container).append(this.imageElement);

        }

        
        move(direction){
            const containerWidth = $(this.gameContainer).width();
            const containerLeft = 250;
            if (direction === 'left'){
                this.x -= 10; 
                if (this.x < containerLeft){
                    this.x = containerLeft;
                }
            } else if (direction === 'right'){
                this.x += 10;
                const containerRight = containerWidth - this.imageElement.width();
                if (this.x > containerRight){
                    this.x = containerRight;
                }
            }

            this.imageElement.css('left', this.x + 'px' );
        }

    }

        $(document).keydown(function(e){
            if (e.which === 37){
                space_cat.move('left');
            } else if (e.which === 39){
                space_cat.move('right');
            }
        });


   

    const space_cat = new Defender ('spacecat.png', 'space cat', 690, '#imagecontainer', '#gamecontainer');
    space_cat.appendImage();
    space_cat.move();




    
});




//old code 
$(document).ready(function(){

    //creating defender class, adding image, move function, then creating space_cat as defender instance
        class Defender {
            constructor(src, alt, x, y, container){
                this.src = src;
                this.alt = alt;
                this.container = container;
                this.x = x;
                this.y = y;
                this.defender_imageElement = $('<img>', {
                    src: this.src,
                    alt: this.alt,
                });
    
                this.defender_imageElement.css('position', 'absolute', );
                this.defender_imageElement.css('left', this.x + 'px');
                this.defender_imageElement.css('top', this.y + 'px');
        
    
            } 
    
            append_defenderImage(){
                $(this.container).append(this.defender_imageElement);
    
            }
    
            
            move(direction){
                const containerWidth = $(this.container).width();
                const containerLeft = 0;
                if (direction === 'left'){
                    this.x -= 15; 
                    if (this.x < containerLeft){
                        this.x = containerLeft;
                    }
                } else if (direction === 'right'){
                    this.x += 15;
                    const containerRight = containerWidth - this.defender_imageElement.width();
                    if (this.x > containerRight){
                        this.x = containerRight;
                    }
                }
    
                this.defender_imageElement.css('left', this.x + 'px' );
            }
    
        }
    
            $(document).keydown(function(e){
                if (e.which === 37){
                    space_cat.move('left');
                } else if (e.which === 39){
                    space_cat.move('right');
                }
            });
    
    
       
    
        const space_cat = new Defender ('spacecat.png', 'space cat', 370, 560, '#gamecontainer');
        space_cat.append_defenderImage();
        space_cat.move();
    
    
    let invaders = [];
    class Invader {
        constructor(src, alt, speed, direction, x, y, container){
            this.src = src;
            this.alt = alt;
            this.speed = speed;
            this.direction = direction;
            this.x = x;
            this.y = y;
            this.container = container;
            this.invader_imageElement = $('<img>', {
                src: this.src,
                alt: this.alt
            });
    
            this.invader_imageElement.css('position', 'absolute');
            this.invader_imageElement.css('left', this.x + 'px' );
            this.invader_imageElement.css('top', this.y + 'px');
    
    
            }
    
            append_invaderImage(){
                $(this.container).append(this.invader_imageElement);
    
            }
    
            move(){
                const containerWidth = $(this.container).width();
                const invaderWidth = this.invader_imageElement.width();


                if (this.direction === 'right'){
                    this.x += this.speed;
                } else if (this.direction === 'left'){
                    this.x -= this.speed;
                }

                    if (this.x + invaderWidth >= containerWidth || this.x <= 0){
                        if (this.direction === 'right'){
                            this.direction = 'downLeft';
                        } else if (this.direction === 'downLeft'){
                            this.direction = 'left';
                            this.y += 50;
                        } else {
                            this.direction = 'right';
                            this.y += 50;
                        }
                    }
                


                
                         
            
            
            
                this.invader_imageElement.css('left', this.x + 'px');
                this.invader_imageElement.css('top', this.y + 'px');
    
            }
    
    }
    
    function invaderGrid (rows, columns, container){
        initialPosition = 0;
        for (let i = 0; i < rows; i++){
            for (let j = 0; j < columns; j++){
                const x = 0 + j * 70;
                const y = i * 70;
    
            
           
    
            const space_mouse = new Invader('spacemouse.png', 'space mouse', 3, 'right', x, y, container);
            invaders.push(space_mouse);
            space_mouse.append_invaderImage();
            }
        }

    
    }
    
    invaderGrid(5, 6,'#invadercontainer');

    
    function moveInvaders(){
        let reachedContainerBottom = false;
        for (let i = 0; i < invaders.length; i++){
            invaders[i].move();


            if (invaders[i].y + invaders[i].invader_imageElement.height() >= $(invaders[i].container).height()){
                reachedContainerBottom = true;
            }
        }

            if (reachedContainerBottom){
                for (let i = 0; i < invaders.length; i++){
                    invaders[i].y = initialPosition + (i%5) * 70;
                }
            }
        
        
    

        requestAnimationFrame(moveInvaders);
    
    }
    
    requestAnimationFrame(moveInvaders);
    
    });
    
    
    

